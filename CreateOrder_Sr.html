<!DOCTYPE html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title>Ambica Darbar Batti</title>
    <meta name="description" content="Ambica Darbar Batti">
    <meta name="Ambica Darbar Batti" content="True">
    <meta name="MobileOptimized" content="320">
   <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"/>
    <meta name="msapplication-TileColor" content="#222222">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- SEO: If mobile URL is different from desktop URL, add a canonical link to the desktop page -->
    <!--
    <link rel="canonical" href="http://www.example.com/" >
    -->

    <!-- For iOS web apps. Delete if not needed. https://github.com/h5bp/mobile-boilerplate/issues/94 -->
    <!--
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="">
    -->

    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,700,100' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
    <!-- Icons -->

    <!-- Stylesheets -->
   <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/materialize.min.css">
    <link rel="stylesheet" href="css/swipebox.min.css">
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="bootstrap/css/css/font-awesome.css">
    <link rel="stylesheet" type="text/css" href="css/demo.css" />
    <link rel="stylesheet" type="text/css" href="css/component1.css" />
    <script src="js/vendor/modernizr-2.7.1.min.js"></script>
    
  <style>
  .rnd{
    font-size: 1.6em;
    width: 2em;
    text-align: center;
    line-height: 2em;
    background: #905FAA;
    color: #fff;
    border-radius: 1em; /* or 50% width & line-height */
  }
/*  #sdata{
   height:auto;
   max-height:200px;
   width:90%;
   overflow-y: scroll;
   z-index:999;
   position: absolute;
   color:#fff;
   padding:5px;
   background-color: #1C144D;
   display:none;
  }*/

  </style>  
  </head>
  
  <body style="background: #fff">
        
    <!-- Main Container -->
    <div id="main" class="main">

      <!-- Toolbar -->
      <div id="toolbar" class="primary-color z-depth-1">
        <div class="open-left" id="open-left" data-activates="slide-out-left">
          <i class="fa fa-bars" style="font-size:20px;margin-top:22px;"></i>
        </div>
        <h1 class="title">Ambica CRM</h1>
        <div class="open-right" id="open-right" data-activates="slide-out">
          &nbsp;
        </div>
      </div>
      <!-- End of Toolbar -->

      <!-- Page Contents -->
      <div class="page">
        <!-- Your contents goes here! -->
                                                  <br>
<div class="container" style="padding:0px;">
<form id="corder">
<div id="first">
<select name="dis" id="dis" class="form-control" onchange="showCustomers(this.value)" required>
    <option value="">Select Distributor</option>
</select>
<br>
<select name="customer" id="customer" class="form-control" required>
    <option value="">Select Customer</option>
</select>
<br>
<input type="text" name="saletype" class="form-control" placeholder="SALE ORDER TYPE" required="required"/><br>
DELIVERY DATE
<input type="date" name="deldate" class="form-control" required="required"/><br>
</div>

<div id="second">
<div class="table-responsive" style="z-index:999">
  <table class="table table-bordered" style="width:1000px">
<tr></tr>
  </table>
</div>
</div>
<input type="hidden" name="company" value="5"/>
<input type="hidden" name="cby" id="cby" value=""/>
<input type="submit" name="submit" class="btn btn-primary pull-right" value="CREATE ORDER"/>
</form>
</div>
      </div>

      <!-- End of Page Contents -->

      <!-- Sidebars -->
      <!-- Left Sidebar -->
      <ul id="slide-out-left" class="side-nav collapsible">
        <li class="sidenav-avatar" style="background-color: #BCBADE">
          <div class="opacity-overlay-gradient"></div>
          <div class="bottom">
            <img src="img/user.png" alt="" class="avatar">
            <!-- Dropdown Trigger -->
            <span class="dropdown-button waves-effect waves-light" data-activates="dropdown1">
            <span id="uname"></span></span>
          </div>
        </li>
        <li><a href="Screen_SR.html" class="waves-effect">
          <i class="fa fa-home" style="margin-top:4px;"></i> Home</a></li>
        <li><a href="CreateOrder_Sr.html" class="waves-effect">
        <i class="fa fa-edit" style="margin-top:4px;"></i> Create</a></li>
        <li><a href="View_Orders_SR.html" class="waves-effect">
        <i class="fa fa-eye" style="margin-top:4px;"></i> View</a></li>
        <li><a href="#" class="waves-effect">
        <i class="fa fa-user-circle-o" style="margin-top:4px;"></i> Profile</a></li>
        <li><a href="#" class="waves-effect">
        <i class="fa fa-bar-chart-o" style="margin-top:4px;"></i> Reports</a></li>
      </ul>

<div id="itemModal" class="modal fade" role="dialog" style="width:100%;background-color: transparent;">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content" style="padding:0px;">
      <div class="modal-header" style="background-color: #905FAA;color:#fff">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">ADD PRODUCT</h4>
      </div>
      <div class="modal-body">
<select name="group" id="group" class="form-control" onchange="showProducts(this.value)">
    <option value="">Select Group</option>
</select>
<br>
      <!-- <input type="text" name="itemname" id="itemname" class="form-control" onkeyup="showProducts(this.value,document.getElementById('group').value);" placeholder="Type Product Name" style="width:260px" tabindex="1"/> -->
<div id="sdata" style="margin-bottom:10px;">
<select name="product" id="product" class="form-control" onchange="doOperation(this.value)" tabindex="1">
  <option value="">CHOOSE ITEM</option>
</select>
</div>
      <input type="number" name="qtycases" id="qtycases" class="form-control" placeholder="Quantity in Cases" tabindex="2" onblur="updatePrice(this.value);"/>
      <input type="hidden" name="itemname" id="itemname" class="form-control" placeholder="Item Name"/>
      <input type="hidden" name="qtyunits" id="qtyunits" class="form-control" placeholder="Quantity in Units"/>
      <input type="hidden" name="qtypacks" id="qtypacks" class="form-control" placeholder="Quantity in Packs"/>
      <input type="hidden" name="price" id="price" class="form-control" placeholder="Price"/>
      <input type="hidden" name="weight" id="weight" class="form-control" placeholder="Weight in Kgs"/>
    <input type="hidden" name="actualqty" id="actualqtyqtyunits" class="form-control" placeholder="Actual Quantity"/>
      <input type="hidden" name="billedqty" id="billedqty" class="form-control" placeholder="Billed Quantity"/>
      <input type="hidden" name="rate" id="rate" class="form-control" placeholder="Rate"/>
      <input type="hidden" name="perbox" id="perbox" class="form-control" placeholder="Per Box"/>
      <input type="hidden" name="itemcode" id="itemcode" class="form-control" placeholder="Item Code"/>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" data-dismiss="modal" onclick="addData2Row();" style="margin-left:10px;">Add</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <img src="img/preloader.gif" style="width:20px;height:20px;display:none" id="ploader">
      </div>
    </div>

  </div>
</div>

    </div>
    <div style="position: absolute;bottom:15px;right:15px;" class="rnd" id="add">
  <i class="fa fa-plus"></i>
</div>
    <!-- End of Main Container -->
    
    <!-- Scripts -->
    <script src="js/vendor/jquery-2.1.0.min.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>
    <script src="js/helper.js"></script>
    <script src="js/vendor/HeadsUp.js"></script>
    <script src="js/vendor/chart.min.js"></script>
    <script src="js/vendor/jquery.mixitup.min.js"></script>
    <script src="js/vendor/jquery.swipebox.min.js"></script>
    <script src="js/vendor/masonry.min.js"></script>
    <script src="js/vendor/swiper.min.js"></script>
    <script src="js/vendor/materialize.min.js"></script>
    <script src="js/main.js"></script>
    <script>
        $(function(){
        $("#cby").val(localStorage.getItem("User_Name"));
         $("#add").on('click', function(e){
           e.preventDefault();
           $("#itemModal").modal("show");
        });

        $("#corder").on('submit', function(e){
           e.preventDefault();
           var fdata= $("#corder").serialize();
           $.ajax({
              url:"http://apkser.laksanasoft.com/Login/insertorder",
              data:fdata,
              type:"GET",
              beforeSend:function(){

              },
              success: function(str){
                if(str.Success == 'True'){
                    location.href='View_Orders_SR.html';
                }else{
                  alert(str.Success);
                }
              }
           });
        });
        $("#uname").html(localStorage.getItem("User_Name"));
          $.ajax({
          url:"http://apkser.laksanasoft.com/Login/Getlist",
          data:{"Sales_Executive_Name":localStorage.getItem("User_Name")},
          type:"GET",
          success:function(data){
            //alert(data);
                  var toAppend = '';
                     $.each(data,function(i,o){
                     toAppend += '<option value="'+o.Customer_Id+'">'+o.Customer_Name+'</option>';
                    });

                   $('#dis').append(toAppend);

          }
          });

          $.ajax({
          url:"http://apkser.laksanasoft.com/Login/getItems",
          type:"GET",
          success:function(data){
                  var toAppend = '';
                     $.each(data,function(i,o){
                     toAppend += '<option value="'+o.Group_Id+'">'+o.Group_Name+'</option>';
                    });

                   $('#group').append(toAppend);

          }
          });
    });
    function showCustomers(cid){
    $.ajax({
          url:"http://apkser.laksanasoft.com/Login/getCustomer",
          data:{"Customer_Id":cid},
          type:"GET",
          success:function(data){
                  var toAppend = '';
                     $.each(data,function(i,o){
                     toAppend += '<option value="'+o.Customer_Id+'">'+o.Customer_Name+'</option>';
                    });

                   $('#customer').append(toAppend);

          }
          });

    }


    // function showProducts(kword,igroup){
    //   if(kword.length>2){
    //     var fdata = {"Group_Id":igroup,"Item_Name":kword};
    //     $.ajax({
    //        url:"http://apkser.laksanasoft.com/Login/getproductsbygropid",
    //        type:"GET",
    //        data:fdata,
    //        beforeSend:function(str){
    //          $("#ploader").show();
    //        },
    //        success: function(data){
    //          var toAppend='';
    //         if(data.length > 0){
    //           $("#ploader").hide();
    //          $.each(data,function(i,o){
    //            $("#sdata").show();
    //                  toAppend += '<li onclick="addItems(\''+o.Item_Code+'\',\''+o.Item_Name+'\',\''+o.No_Of_Unit_Per_Case+'\',\''+o.No_Of_Packs+'\',\''+o.Weight+'\',\''+o.Case_Units+'\',\''+o.Price+'\');">'+o.Item_Name+'</li>';
    //                 });
    //                 $("#ldata").append(toAppend);
    //         }else{
    //             $("#sdata").hide();
    //         }
    //        }
    //     });
    //   }else{
    //     $("#sdata").hide();
    //   }
    // }

    function addItems(icode,iname,nunits,npacks,weight,cunits,price){
      $("#sdata").hide();
      $("#itemname").val(iname);
      $("#qtyunits").val(nunits);
      $("#qtypacks").val(npacks);
      $("#price").val(nunits);
      $("#weight").val(weight);
      $("#actualqtyunits").val(nunits);
      $("#perbox").val(cunits);
      $("#itemcode").val(icode);
      //console.log(icode+","+iname+","+nunits+","+npacks+","+weight+","+cunits+","+price);
    }
    function updatePrice(no){
      console.log(no);
      $("#rate").val(no * ($("#price").val()));
      $("#billedqty").val(no);
    }
    function addData2Row(){
var markup = '<tr><td width="20%"><input type="text" name="itemname" class="form-control" value="'+$("#itemname").val()+'"/></td><td width="10%"><input type="number" name="qtycases" class="form-control" value="'+$("#qtycases").val()+'"/></td><td width="10%"><input type="number" name="qtyunits" class="form-control" value="'+$("#qtyunits").val()+'"/></td><td width="10%"><input type="number" name="qtypacks" class="form-control" value="'+$("#qtypacks").val()+'"/></td><td width="10%"><input type="number" name="price" class="form-control" value="'+$("#price").val()+'"/></td><td width="10%"><input type="number" name="weight" class="form-control" value="'+$("#weight").val()+'"/></td><td width="10%"><input type="number" name="actualqty" class="form-control" value="'+$("#actualqtyunits").val()+'"/></td><td width="5%"><input type="number" name="billedqty" class="form-control" value="'+$("#qtycases").val()+'"/></td><td width="5%"><input type="number" name="rate" class="form-control" value="'+$("#rate").val()+'"/></td><td width="10%"><input type="number" name="perbox" class="form-control" value="'+$("#qtycases").val()+'"/></td><td width="10%"><input type="number" name="itemcode" class="form-control" value="'+$("#itemcode").val()+'"/></td></tr>';
            $("table tbody").append(markup);
    }
    </script>
  </body>
</html>
